import{c as P,a as D,b as L,r as A,$ as B,j as e,U as j}from"./index-CSY5YgiJ.js";import{B as h,C as c,a as U,b as T,c as i}from"./card-dyY2Qvrr.js";import{I as N}from"./input-bM4iH4pw.js";import{S as v,a as y,b as w,c as _,d as l}from"./select-CjlLjNwJ.js";import{B as u}from"./badge-BGXpxCgB.js";import{S as d}from"./skeleton-DxyLGv-Z.js";import{D as V}from"./dollar-sign-BaKeI9bc.js";import{C as $}from"./clock-CjbOfw6e.js";import{C as E}from"./calendar-B2A11fRt.js";import"./index-Q8Z8E6D0.js";import"./Combination-CrH4g3RK.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=P("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),Z=()=>{const p=D(),{data:b,isLoading:C}=L(),[t,g]=A.useState({status:"open"}),{data:r,isLoading:k,error:n,refetch:S,isFetching:J}=B(t);if(C)return e.jsx("div",{className:"container mx-auto px-6 py-8",children:e.jsx("div",{className:"text-center",children:e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Loading..."})})});if(!b)return e.jsx("div",{className:"container mx-auto px-6 py-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Please Login"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"You need to be logged in to browse Projects."}),e.jsx(h,{onClick:()=>p("/auth"),children:"Go to Login"})]})});const m=(s,a)=>{g(x=>({...x,[s]:a==="all"?void 0:a}))},F=()=>{g({status:"open"})},o=(s,a="INR")=>new Intl.NumberFormat("en-IN",{style:"currency",currency:a,minimumFractionDigits:0}).format(s),f=s=>new Date(s).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}),I=s=>{switch(s){case"open":return"default";case"under_review":return"secondary";case"awarded":return"outline";case"in_progress":return"secondary";case"completed":return"secondary";case"cancelled":return"destructive";default:return"outline"}};return n?(console.error("âŒ Jobs API Error:",n),e.jsx("div",{className:"container mx-auto px-6 py-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Failed to load projects"}),e.jsxs("p",{className:"text-muted-foreground mb-4",children:["Error: ",(n==null?void 0:n.message)||"Unknown error"]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Check the browser console for more details."}),e.jsx(h,{onClick:()=>S(),children:"Try Again"})]})})):e.jsxs("div",{className:"container mx-auto px-6 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"VFX projects"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Discover VFX opportunities and find your next project"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[e.jsx("div",{className:"lg:col-span-1 lg:h-[calc(100vh-10rem)] pr-2",children:e.jsxs(c,{className:"h-full",children:[e.jsx(U,{children:e.jsxs(T,{className:"flex items-center gap-2",children:[e.jsx(q,{className:"h-5 w-5"}),"Filters"]})}),e.jsxs(i,{className:"space-y-4 p-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Status"}),e.jsxs(v,{value:t.status||"all",onValueChange:s=>m("status",s),children:[e.jsx(y,{children:e.jsx(w,{})}),e.jsxs(_,{children:[e.jsx(l,{value:"all",children:"All Status"}),e.jsx(l,{value:"open",children:"Open"}),e.jsx(l,{value:"under_review",children:"Under Review"}),e.jsx(l,{value:"awarded",children:"Awarded"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Payment Type"}),e.jsxs(v,{value:t.payment_type||"all",onValueChange:s=>m("payment_type",s),children:[e.jsx(y,{children:e.jsx(w,{})}),e.jsxs(_,{children:[e.jsx(l,{value:"all",children:"All Types"}),e.jsx(l,{value:"fixed",children:"Fixed Price"}),e.jsx(l,{value:"per_shot",children:"Per Shot"}),e.jsx(l,{value:"per_frame",children:"Per Frame"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Skills"}),e.jsx(N,{placeholder:"e.g., compositing, particles",value:t.skills||"",onChange:s=>m("skills",s.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Software"}),e.jsx(N,{placeholder:"e.g., Nuke, Houdini",value:t.software||"",onChange:s=>m("software",s.target.value)})]}),e.jsx("div",{className:"flex gap-2",children:e.jsx(h,{variant:"outline",size:"sm",onClick:F,children:"Clear"})})]})]})}),e.jsx("div",{className:"lg:col-span-3 lg:h-[calc(100vh-10rem)] pr-2",children:e.jsx(c,{className:"h-full",children:e.jsxs(i,{className:"p-0 h-full flex flex-col",children:[e.jsx("div",{className:"p-6 border-b",children:e.jsx("h3",{className:"text-lg font-semibold",children:"Available projects"})}),e.jsx("div",{className:"flex-1 overflow-y-auto scrollbar-thin scrollbar-thumb-muted scrollbar-track-transparent p-6 space-y-4",children:k?e.jsx(e.Fragment,{children:[...Array(2)].map((s,a)=>e.jsx(c,{children:e.jsx(i,{className:"p-6",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx(d,{className:"h-6 w-3/4"}),e.jsx(d,{className:"h-4 w-1/2"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(d,{className:"h-4 w-20"}),e.jsx(d,{className:"h-4 w-24"}),e.jsx(d,{className:"h-4 w-16"})]})]})})},a))}):(r==null?void 0:r.length)===0?e.jsx("div",{className:"flex items-center justify-center h-full min-h-[400px]",children:e.jsx(c,{className:"w-full max-w-md",children:e.jsxs(i,{className:"p-8 text-center",children:[e.jsx(j,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No projects found"}),e.jsx("p",{className:"text-muted-foreground mb-2",children:"Try adjusting your filters or check back later for new opportunities."})]})})}):r==null?void 0:r.slice(0,2).map(s=>e.jsx(c,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:()=>p(`/jobs/${s._id}`),children:e.jsxs(i,{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold mb-2",children:s.title}),e.jsx("p",{className:"text-muted-foreground line-clamp-2",children:s.description})]}),e.jsx(u,{variant:I(s.status),children:s.status.replace("_"," ")})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-muted-foreground mb-4",children:[s.total_shots&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(j,{className:"h-4 w-4"}),s.total_shots," shots"]}),(s.min_budget||s.max_budget)&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(V,{className:"h-4 w-4"}),s.min_budget&&s.max_budget?`${o(s.min_budget,s.currency)} - ${o(s.max_budget,s.currency)}`:s.min_budget?`From ${o(s.min_budget,s.currency)}`:`Up to ${o(s.max_budget,s.currency)}`]}),s.bid_deadline&&s.status==="open"&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx($,{className:"h-4 w-4"}),"Bids due ",f(s.bid_deadline)]}),s.final_delivery_date&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(E,{className:"h-4 w-4"}),"Due ",f(s.final_delivery_date)]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[s.required_skills.slice(0,3).map((a,x)=>e.jsx(u,{variant:"secondary",className:"text-xs",children:a},x)),s.required_skills.length>3&&e.jsxs(u,{variant:"secondary",className:"text-xs",children:["+",s.required_skills.length-3," more"]})]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Posted by ",s.created_by.email]})]})},s._id))})]})})})]})]})};export{Z as default};
