import{x as ye,a as _e,b as ke,a0 as Be,a1 as Se,a2 as Ce,a3 as De,r as f,a4 as Ae,a5 as Fe,j as e,f as Pe,u as D}from"./index-CSY5YgiJ.js";import{u as Ie,b as Y,t as ze}from"./zod-d7-ns2YA.js";import{B as p}from"./badge-BGXpxCgB.js";import{B as d,C as g,a as b,b as v,c as w}from"./card-dyY2Qvrr.js";import{D as T,d as Re,a as E,b as L,c as O}from"./dialog-BvnH3A07.js";import{I as h}from"./input-bM4iH4pw.js";import{L as t}from"./label-Bz9P5vOH.js";import{S as c}from"./skeleton-DxyLGv-Z.js";import{T as Te}from"./textarea-BOa-INnI.js";import{b as Ee}from"./jobs-hMLXsdQf.js";import{P as Z}from"./plus-35letP8-.js";import{T as ee}from"./trash-2-DWtXyLna.js";import{C as Le}from"./clock-CjbOfw6e.js";import{C as Oe}from"./calendar-B2A11fRt.js";import"./Combination-CrH4g3RK.js";import"./types-L2k3iFj2.js";const as=()=>{var H,W,X,G,K,Q;const{id:o}=ye(),y=_e(),{data:n}=ke(),{data:a,isLoading:se,error:ae}=Be(o),{data:m,isLoading:te}=Se(o),le=Ce(),_=De(),[$,ie]=f.useState(null),[k,re]=f.useState(null),[de,A]=f.useState(!1),[ce,F]=f.useState(!1),[i,ne]=f.useState(null),[me,V]=f.useState(!1),{data:r,isLoading:oe}=Ae($),{register:x,control:U,handleSubmit:xe,reset:ue,setValue:J,formState:{errors:B,isSubmitting:q}}=Ie({resolver:ze(Ee),defaultValues:{job_id:o||"",currency:"INR",breakdown:[],included_services:[]}});Fe.useEffect(()=>{if(o&&J("job_id",o),(a==null?void 0:a.status)==="awarded"&&m&&m.length>0){const s=m.find(l=>l.status==="accepted");s&&ne(s)}},[o,J,a,m]);const{fields:pe,append:he,remove:fe}=Y({control:U,name:"breakdown"}),{fields:je,append:Ne,remove:ge}=Y({control:U,name:"included_services"}),u=(s,l="INR")=>new Intl.NumberFormat("en-IN",{style:"currency",currency:l,minimumFractionDigits:0}).format(s),P=s=>new Date(s).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}),M=s=>{switch(s){case"pending":return"secondary";case"shortlisted":return"default";case"accepted":return"default";case"rejected":return"destructive";case"withdrawn":return"outline";default:return"outline"}},be=()=>!n||!n.user||!n.user.roles||!a?!1:(n.user.roles.includes("artist")||n.user.roles.includes("studio"))&&a.status==="open"&&a.assignment_mode==="open"&&a.created_by._id!==n.user.id,I=()=>!n||!n.user||!a?!1:a.created_by._id===n.user.id,ve=async s=>{var l,j,N,S;try{const R={job_id:s.job_id||o||"",amount_total:s.amount_total,currency:s.currency,breakdown:(l=s.breakdown)==null?void 0:l.map(C=>({label:C.label||"",amount:C.amount||0})),estimated_duration_days:s.estimated_duration_days,start_available_from:s.start_available_from,notes:s.notes,included_services:(j=s.included_services)==null?void 0:j.map(C=>C.value)};await le.mutateAsync(R),D.success("Bid submitted successfully!"),F(!1),ue()}catch(R){D.error(((S=(N=R.response)==null?void 0:N.data)==null?void 0:S.error)||"Failed to submit bid")}},z=async(s,l)=>{var j,N;try{await _.mutateAsync({id:s,data:{status:l}}),D.success(`Bid ${l} successfully`)}catch(S){D.error(((N=(j=S.response)==null?void 0:j.data)==null?void 0:N.error)||"Failed to update bid status")}},we=(s,l)=>{ie(s),re(l),A(!0)};return se?e.jsx("div",{className:"container mx-auto px-4 sm:px-6 py-6 max-w-7xl",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(c,{className:"h-8 w-3/4"}),e.jsx(c,{className:"h-32 w-full"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(c,{className:"h-48 w-full"}),e.jsx(c,{className:"h-48 w-full"})]})]})}):ae||!a?e.jsx("div",{className:"container mx-auto px-4 sm:px-6 py-8",children:e.jsxs("div",{className:"text-center max-w-md mx-auto",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Job not found"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"The job you're looking for doesn't exist or has been removed."}),e.jsx(d,{onClick:()=>y("/jobs"),className:"w-full sm:w-auto",children:"Back to Projects"})]})}):e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 py-6 max-w-7xl",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-start lg:justify-between gap-4 lg:gap-0 mb-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold mb-2 leading-tight",children:a.title}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-sm sm:text-base text-muted-foreground",children:[e.jsxs("span",{children:["Posted by ",a.created_by.email]}),e.jsx(p,{variant:M(a.status),className:"text-xs sm:text-sm",children:a.status.replace("_"," ")})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto sm:ml-auto",children:[be()&&e.jsxs(T,{open:ce,onOpenChange:F,children:[e.jsx(Re,{asChild:!0,children:e.jsx(d,{size:"lg",className:"w-full sm:w-auto flex-1 sm:flex-none",children:"Place Bid"})}),e.jsxs(E,{className:"max-w-2xl max-h-[85vh] overflow-y-auto p-0 sm:p-5",children:[e.jsx(L,{className:"px-5 pt-5 pb-3 border-b",children:e.jsxs(O,{className:"text-xl sm:text-2xl font-bold",children:['Submit Bid for "',a.title,'"']})}),e.jsxs("form",{onSubmit:xe(ve),className:"px-5 pb-5 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(t,{htmlFor:"amount_total",className:"text-sm font-medium",children:"Total Amount *"}),e.jsx(h,{id:"amount_total",type:"number",className:"mt-1",...x("amount_total",{valueAsNumber:!0})}),B.amount_total&&e.jsx("p",{className:"text-sm text-destructive mt-1",children:B.amount_total.message})]}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"currency",className:"text-sm font-medium",children:"Currency"}),e.jsx(h,{id:"currency",className:"mt-1",...x("currency"),defaultValue:"INR"})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx(t,{className:"text-sm font-medium",children:"Price Breakdown"}),e.jsxs(d,{type:"button",variant:"outline",size:"sm",onClick:()=>he({label:"",amount:0}),children:[e.jsx(Z,{className:"h-4 w-4 mr-2"}),"Add Item"]})]}),e.jsx("div",{className:"space-y-2",children:pe.map((s,l)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx(h,{...x(`breakdown.${l}.label`),placeholder:"Item description",className:"flex-1"}),e.jsx(h,{type:"number",...x(`breakdown.${l}.amount`,{valueAsNumber:!0}),placeholder:"Amount",className:"w-28"}),e.jsx(d,{type:"button",variant:"destructive",size:"sm",onClick:()=>fe(l),children:e.jsx(ee,{className:"h-4 w-4"})})]},s.id))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(t,{htmlFor:"estimated_duration_days",className:"text-sm font-medium",children:"Estimated Duration (days)"}),e.jsx(h,{id:"estimated_duration_days",type:"number",className:"mt-1",...x("estimated_duration_days",{valueAsNumber:!0})})]}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"start_available_from",className:"text-sm font-medium",children:"Available to Start"}),e.jsx(h,{id:"start_available_from",type:"date",className:"mt-1",...x("start_available_from")})]})]}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"notes",className:"text-sm font-medium",children:"Proposal Notes"}),e.jsx(Te,{id:"notes",className:"mt-1",...x("notes"),placeholder:"Describe your approach, experience, and why you're the right fit...",rows:4})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx(t,{className:"text-sm font-medium",children:"Included Services"}),e.jsxs(d,{type:"button",variant:"outline",size:"sm",onClick:()=>Ne({value:""}),children:[e.jsx(Z,{className:"h-4 w-4 mr-2"}),"Add Service"]})]}),e.jsxs("div",{className:"space-y-2",children:[je.map((s,l)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx(h,{...x(`included_services.${l}.value`),placeholder:"Service description (e.g., Storyboarding)",className:"flex-1"}),e.jsx(d,{type:"button",variant:"destructive",size:"sm",onClick:()=>ge(l),children:e.jsx(ee,{className:"h-4 w-4"})})]},s.id)),B.included_services&&e.jsx("p",{className:"text-sm text-destructive mt-1",children:B.included_services.message})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3 pt-3 border-t",children:[e.jsx(d,{type:"button",variant:"outline",className:"w-full sm:w-auto",onClick:()=>F(!1),children:"Cancel"}),e.jsxs(d,{type:"submit",disabled:q,className:"w-full sm:w-auto",children:[q&&e.jsx(Pe,{className:"h-4 w-4 mr-2 animate-spin"}),"Submit Bid"]})]})]})]})]}),e.jsx(d,{variant:"outline",size:"lg",onClick:()=>y("/jobs"),className:"w-full sm:w-auto flex-1 sm:flex-none",children:"Back to Projects"}),I()&&e.jsx(d,{size:"lg",onClick:()=>y(`/jobs/${o}/edit`),className:"w-full sm:w-auto flex-1 sm:flex-none",children:"Edit project"})]})]}),e.jsx("div",{className:"prose prose-sm max-w-none text-muted-foreground leading-relaxed",children:a.description})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-5 lg:gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[e.jsxs(g,{className:"w-full",children:[e.jsx(b,{className:"pb-3 pt-4",children:e.jsx(v,{className:"text-lg font-semibold",children:"VFX Specifications"})}),e.jsxs(w,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4",children:[a.resolution&&e.jsxs("div",{className:"space-y-1",children:[e.jsx(t,{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Resolution"}),e.jsx("p",{className:"font-semibold text-base",children:a.resolution})]}),a.frame_rate&&e.jsxs("div",{className:"space-y-1",children:[e.jsx(t,{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Frame Rate"}),e.jsxs("p",{className:"font-semibold text-base",children:[a.frame_rate," fps"]})]}),a.total_shots&&e.jsxs("div",{className:"space-y-1",children:[e.jsx(t,{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Total Shots"}),e.jsx("p",{className:"font-semibold text-base",children:a.total_shots})]}),a.total_frames&&e.jsxs("div",{className:"space-y-1",children:[e.jsx(t,{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Total Frames"}),e.jsx("p",{className:"font-semibold text-base",children:a.total_frames})]})]}),a.shot_breakdown&&a.shot_breakdown.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsx(t,{className:"text-sm font-medium text-muted-foreground mb-3 block",children:"Shot Breakdown"}),e.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto pr-2",children:a.shot_breakdown.map((s,l)=>e.jsxs("div",{className:"flex justify-between items-start p-4 bg-muted/50 hover:bg-muted rounded-xl border transition-all",children:[e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"font-semibold text-sm truncate",children:s.name}),s.shot_code&&e.jsx("p",{className:"text-xs text-muted-foreground mt-0.5 truncate",children:s.shot_code})]}),e.jsxs("div",{className:"flex flex-col items-end gap-1.5 ml-3 flex-shrink-0",children:[e.jsx(p,{variant:"outline",className:"text-xs px-2.5 py-0.5",children:s.complexity}),s.frame_in!==void 0&&s.frame_out!==void 0&&e.jsxs("p",{className:"text-xs text-muted-foreground font-mono",children:[s.frame_in,"-",s.frame_out]})]})]},l))})]})]})]}),e.jsxs(g,{className:"w-full",children:[e.jsx(b,{className:"pb-3 pt-4",children:e.jsx(v,{className:"text-lg font-semibold",children:"Requirements"})}),e.jsxs(w,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{className:"text-sm font-medium text-muted-foreground",children:"Required Skills"}),e.jsx("div",{className:"flex flex-wrap gap-1.5",children:a.required_skills.map((s,l)=>e.jsx(p,{variant:"secondary",className:"text-xs px-2.5 py-1",children:s},l))})]}),a.software_preferences&&a.software_preferences.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{className:"text-sm font-medium text-muted-foreground",children:"Software Preferences"}),e.jsx("div",{className:"flex flex-wrap gap-1.5",children:a.software_preferences.map((s,l)=>e.jsx(p,{variant:"outline",className:"text-xs px-2.5 py-1",children:s},l))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{className:"text-sm font-medium text-muted-foreground",children:"Deliverables"}),e.jsx("ul",{className:"space-y-2 mt-2 pl-5 list-disc",children:a.deliverables.map((s,l)=>e.jsx("li",{className:"text-sm",children:e.jsx("span",{className:"break-words",children:s})},l))})]})]})]})]}),e.jsxs("div",{className:"space-y-4 lg:sticky lg:top-6 lg:h-[calc(100vh-6rem)] lg:overflow-y-auto",children:[e.jsxs(g,{className:"w-full",children:[e.jsx(b,{className:"pb-3 pt-4",children:e.jsx(v,{className:"text-lg font-semibold",children:"Budget & Schedule"})}),e.jsxs(w,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{className:"text-sm font-medium text-muted-foreground uppercase tracking-wide",children:"Payment Type"}),e.jsx("p",{className:"font-semibold text-base capitalize",children:a.payment_type.replace("_"," ")})]}),(a.min_budget||a.max_budget)&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{className:"text-sm font-medium text-muted-foreground uppercase tracking-wide",children:"Budget Range"}),e.jsx("p",{className:"font-semibold text-lg break-words",children:a.min_budget&&a.max_budget?`${u(a.min_budget,a.currency)} - ${u(a.max_budget,a.currency)}`:a.min_budget?`From ${u(a.min_budget,a.currency)}`:`Up to ${u(a.max_budget,a.currency)}`})]}),a.bid_deadline&&a.status==="open"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{className:"text-sm font-medium text-muted-foreground uppercase tracking-wide",children:"Bid Deadline"}),e.jsxs("p",{className:"font-semibold text-base flex items-center gap-2",children:[e.jsx(Le,{className:"h-4 w-4"}),P(a.bid_deadline)]})]}),a.final_delivery_date&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{className:"text-sm font-medium text-muted-foreground uppercase tracking-wide",children:"Final Delivery"}),e.jsxs("p",{className:"font-semibold text-base flex items-center gap-2",children:[e.jsx(Oe,{className:"h-4 w-4"}),P(a.final_delivery_date)]})]})]})]}),I()&&a.status==="awarded"&&e.jsxs(g,{className:"w-full cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>V(!0),children:[e.jsx(b,{className:"pb-3 pt-4",children:e.jsx(v,{className:"text-lg font-semibold",children:"Awarded Bid Details"})}),e.jsx(w,{className:"space-y-4",children:i?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(t,{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Awarded Bidder"}),e.jsx("p",{className:"font-medium text-sm",children:i.bidder_id.name||i.bidder_id.email})]}),e.jsxs("div",{children:[e.jsx(t,{className:"text-sm font-medium text-muted-foreground uppercase tracking-wide",children:"Total Bid Amount"}),e.jsx("p",{className:"font-semibold text-lg",children:u(i.amount_total,i.currency)})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Click to view full details"})]}):e.jsx("p",{className:"text-muted-foreground",children:"No accepted bid found for this job."})})]}),I()&&a.status==="open"&&m&&m.length>0&&e.jsxs(g,{className:"w-full",children:[e.jsx(b,{className:"pb-3 pt-4",children:e.jsxs(v,{className:"text-lg font-semibold flex items-center justify-between",children:["Bid Management",e.jsxs(p,{variant:"secondary",className:"text-xs",children:[m.length," bid",m.length!==1?"s":""]})]})}),e.jsx(w,{className:"p-0",children:te?e.jsxs("div",{className:"p-4 space-y-2",children:[e.jsx(c,{className:"h-12 w-full"}),e.jsx(c,{className:"h-12 w-full"})]}):e.jsx("div",{className:"max-h-72 overflow-y-auto pr-2",children:e.jsx("div",{className:"divide-y divide-border",children:m.map(s=>e.jsxs("button",{type:"button",onClick:()=>we(s.bidder_id._id,s._id),className:"w-full text-left p-3 hover:bg-muted/60 transition-colors flex items-center justify-between gap-3 group",children:[e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"font-semibold text-sm truncate group-hover:text-primary",children:s.bidder_id.email}),s.bidder_id.name&&e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:s.bidder_id.name})]}),e.jsxs("div",{className:"flex flex-col items-end gap-1 flex-shrink-0",children:[e.jsx("p",{className:"text-base font-bold text-primary",children:u(s.amount_total,s.currency)}),e.jsx(p,{variant:M(s.status),className:"text-[11px] px-2 py-0.5 font-medium",children:s.status})]})]},s._id))})})})]})]})]}),e.jsx(T,{open:de,onOpenChange:A,children:e.jsxs(E,{className:"max-w-md sm:max-w-lg max-h-[85vh] overflow-y-auto p-0",children:[e.jsx(L,{className:"px-5 pt-5 pb-3 border-b sticky top-0 bg-background z-10",children:e.jsx(O,{className:"text-xl font-bold",children:"Bidder Profile"})}),$?oe?e.jsxs("div",{className:"p-5 space-y-3",children:[e.jsx(c,{className:"h-5 w-3/4"}),e.jsx(c,{className:"h-4 w-1/2"}),e.jsx(c,{className:"h-4 w-full"}),e.jsx(c,{className:"h-16 w-full"})]}):r?e.jsxs("div",{className:"p-5 space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wide",children:"Email"}),e.jsx("p",{className:"font-semibold text-base",children:r.user.email})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wide",children:"Role"}),e.jsx("p",{className:"font-semibold text-base capitalize",children:((H=r.user.roles)==null?void 0:H[0])||"N/A"})]}),((W=r.profile)==null?void 0:W.name)&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wide",children:"Name"}),e.jsx("p",{className:"font-semibold text-base",children:r.profile.name})]}),((X=r.profile)==null?void 0:X.rating)!==void 0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wide",children:"Rating"}),e.jsxs("div",{className:"flex items-baseline gap-1",children:[e.jsx("p",{className:"text-2xl font-black text-primary",children:r.profile.rating.toFixed(1)}),e.jsx("span",{className:"text-lg font-semibold text-muted-foreground",children:"/ 5.0"})]})]}),((G=r.profile)==null?void 0:G.skills)&&r.profile.skills.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wide",children:"Skills"}),e.jsx("div",{className:"flex flex-wrap gap-1.5",children:r.profile.skills.map((s,l)=>e.jsx(p,{variant:"secondary",className:"text-xs px-2.5 py-1",children:s},l))})]}),((K=r.profile)==null?void 0:K.wall_id)&&e.jsxs("div",{className:"space-y-2 pt-2",children:[e.jsx(t,{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wide",children:"Portfolio Wall"}),e.jsx(d,{variant:"link",size:"sm",className:"h-auto p-0 text-base font-semibold justify-start text-primary hover:text-primary/90",onClick:()=>{var s;y(`/wall/${(s=r.profile)==null?void 0:s.wall_id}`),A(!1)},children:"View Portfolio Wall â†’"})]}),((Q=r.profile)==null?void 0:Q.bio)&&e.jsxs("div",{className:"space-y-2 pt-2",children:[e.jsx(t,{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wide",children:"Bio"}),e.jsx("p",{className:"text-sm leading-relaxed text-muted-foreground max-h-24 overflow-y-auto",children:r.profile.bio})]}),k&&e.jsxs("div",{className:"pt-3 mt-4 border-t flex flex-wrap gap-2 justify-end",children:[e.jsx(d,{size:"sm",variant:"outline",disabled:_.isPending,onClick:()=>z(k,"shortlisted"),className:"h-9 px-3 text-xs",children:"Shortlist"}),e.jsx(d,{size:"sm",disabled:_.isPending,onClick:()=>z(k,"accepted"),className:"h-9 px-3 text-xs",children:"Accept"}),e.jsx(d,{size:"sm",variant:"destructive",disabled:_.isPending,onClick:()=>z(k,"rejected"),className:"h-9 px-3 text-xs",children:"Reject"})]})]}):e.jsx("div",{className:"p-10 text-center",children:e.jsx("p",{className:"text-muted-foreground text-sm",children:"Profile details not available."})}):null]})}),e.jsx(T,{open:me,onOpenChange:V,children:e.jsxs(E,{className:"max-w-md sm:max-w-lg max-h-[85vh] overflow-y-auto p-0",children:[e.jsx(L,{className:"px-5 pt-5 pb-3 border-b sticky top-0 bg-background z-10",children:e.jsx(O,{className:"text-xl font-bold",children:"Awarded Bid Details"})}),i?e.jsxs("div",{className:"p-5 space-y-4",children:[e.jsxs("div",{className:"border-b pb-4",children:[e.jsx("h3",{className:"text-md font-semibold mb-2",children:"Awarded Bidder"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(t,{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Email"}),e.jsx("p",{className:"font-medium text-sm",children:i.bidder_id.email})]}),i.bidder_id.name&&e.jsxs("div",{className:"space-y-1 mt-2",children:[e.jsx(t,{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Name"}),e.jsx("p",{className:"font-medium text-sm",children:i.bidder_id.name})]})]}),e.jsxs("div",{children:[e.jsx(t,{className:"text-sm font-medium text-muted-foreground uppercase tracking-wide",children:"Total Bid Amount"}),e.jsx("p",{className:"font-semibold text-lg",children:u(i.amount_total,i.currency)})]}),i.breakdown&&i.breakdown.length>0&&e.jsxs("div",{children:[e.jsx(t,{className:"text-sm font-medium text-muted-foreground uppercase tracking-wide",children:"Price Breakdown"}),e.jsx("div",{className:"space-y-2 mt-2",children:i.breakdown.map((s,l)=>e.jsxs("div",{className:"flex justify-between items-center bg-muted p-3 rounded-md",children:[e.jsx("p",{className:"text-sm font-medium",children:s.label}),e.jsx("p",{className:"text-sm font-medium",children:u(s.amount,i.currency)})]},l))})]}),e.jsxs("div",{children:[e.jsx(t,{className:"text-sm font-medium text-muted-foreground uppercase tracking-wide",children:"Estimated Duration"}),e.jsxs("p",{className:"font-medium",children:[i.estimated_duration_days," days"]})]}),i.start_available_from&&e.jsxs("div",{children:[e.jsx(t,{className:"text-sm font-medium text-muted-foreground uppercase tracking-wide",children:"Available to Start"}),e.jsx("p",{className:"font-medium",children:P(i.start_available_from)})]}),i.included_services&&i.included_services.length>0&&e.jsxs("div",{children:[e.jsx(t,{className:"text-sm font-medium text-muted-foreground uppercase tracking-wide",children:"Included Services"}),e.jsx("ul",{className:"list-disc pl-5 space-y-1 mt-2",children:i.included_services.map((s,l)=>e.jsx("li",{className:"text-sm text-foreground/90 break-words",children:s},l))})]}),i.notes&&e.jsxs("div",{children:[e.jsx(t,{className:"text-sm font-medium text-muted-foreground uppercase tracking-wide",children:"Proposal Notes"}),e.jsx("p",{className:"text-sm leading-relaxed text-foreground/90",children:i.notes})]})]}):e.jsx("div",{className:"p-10 text-center",children:e.jsx("p",{className:"text-muted-foreground text-sm",children:"No accepted bid found for this job."})})]})})]})};export{as as default};
