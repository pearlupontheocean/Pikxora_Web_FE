import{a as U,b as $,h as F,v as T,ao as I,ap as H,j as e,f as S,u as d}from"./index-CSY5YgiJ.js";import{C as x,a as w,b as v,c as b,B as h}from"./card-dyY2Qvrr.js";import{B as f}from"./badge-BGXpxCgB.js";import{A as y,a as A,b as k}from"./avatar-7vt4lP1e.js";import{R as C}from"./RatingStars-tsFfm_V7.js";import{N as V}from"./Navbar-eeXt84en.js";import{M as _}from"./mail-C02KyBAk.js";import{M as R}from"./map-pin-C4YDvCp_.js";import"./proxy-BCkhZuQv.js";const Z=()=>{var j;const M=U(),{data:t}=$(),u=(j=t==null?void 0:t.user)==null?void 0:j.id,{data:c,isLoading:q,error:o}=F(),{data:n,isLoading:z,error:m}=T(),B=I(),L=H(),P=async a=>{var s,r;try{await B.mutateAsync(a),d.success("Association removed successfully.")}catch(l){d.error(`Failed to remove association: ${((r=(s=l.response)==null?void 0:s.data)==null?void 0:r.error)||"Unknown error"}`)}},p=async(a,s)=>{var r,l;try{await L.mutateAsync({id:a,action:s}),d.success(`Association ${s}ed successfully.`)}catch(i){d.error(`Failed to ${s} association: ${((l=(r=i.response)==null?void 0:r.data)==null?void 0:l.error)||"Unknown error"}`)}};return q||z?e.jsx("div",{className:"flex flex-col justify-center items-center min-h-screen",children:e.jsx(S,{className:"h-8 w-8 animate-spin text-red-600"})}):o||m?e.jsx("div",{className:"p-4 text-red-500",children:e.jsxs("p",{children:["Error loading associations: ",(o==null?void 0:o.message)||(m==null?void 0:m.message)]})}):e.jsxs("div",{className:"min-h-screen",children:[e.jsx(V,{user:t==null?void 0:t.user,profile:t==null?void 0:t.profile}),e.jsxs("div",{className:"container mx-auto p-4 mt-24",children:[e.jsx("h1",{className:"text-3xl font-bold mb-6 text-white",children:"Your Associations"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 h-[calc(100vh-12rem)]",children:[e.jsxs(x,{className:"border-gray-800 shadow-lg flex flex-col h-full",children:[e.jsx(w,{className:"flex-shrink-0",children:e.jsxs(v,{className:"text-xl text-white",children:["Connected (",(c==null?void 0:c.length)||0,")"]})}),e.jsx(b,{className:"flex-1 overflow-y-auto scrollbar-thin scrollbar-thumb-gray-700 scrollbar-track-gray-800",children:c&&c.length>0?e.jsx("div",{className:"space-y-4",children:c.map(a=>{var r,l,i,g;const s=a.requester._id===u?a.recipient:a.requester;return e.jsxs(x,{className:"flex flex-col sm:flex-row items-center justify-between p-4 border border-gray-700 rounded-lg ",children:[e.jsxs("div",{className:"flex items-center gap-4 w-full sm:w-auto",children:[e.jsxs(y,{className:"h-12 w-12 border-2 border-red-600 flex-shrink-0",children:[e.jsx(A,{src:s.profile_picture,alt:s.name||s.email}),e.jsx(k,{className:"bg-red-600 text-white font-bold",children:((r=s.name)==null?void 0:r.charAt(0).toUpperCase())||s.email.charAt(0).toUpperCase()})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-semibold text-lg text-white truncate",children:s.name||s.email}),e.jsxs("p",{className:"text-sm text-gray-400 flex items-center gap-1 truncate",children:[e.jsx(_,{className:"h-3 w-3 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:s.email})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-1 flex-wrap",children:[e.jsx(f,{variant:"secondary",className:"capitalize",children:s.roles[0]}),((l=s.profile)==null?void 0:l.location)&&e.jsxs(f,{variant:"outline",className:"text-blue-400 border-blue-400",children:[e.jsx(R,{className:"h-3 w-3 mr-1"})," ",s.profile.location]}),((i=s.profile)==null?void 0:i.rating)&&e.jsx(C,{rating:s.profile.rating,showBadge:!0})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 mt-4 sm:mt-0 w-full sm:w-auto flex-shrink-0",children:[e.jsx(h,{variant:"outline",size:"sm",onClick:()=>{var N;return M(`/wall/${(N=s.profile)==null?void 0:N.wall_id}`)},disabled:!((g=s.profile)!=null&&g.wall_id),className:"w-full sm:w-auto",children:"View Wall"}),e.jsx(h,{variant:"destructive",size:"sm",onClick:()=>P(a._id),className:"w-full sm:w-auto",children:"Remove"})]})]},a._id)})}):e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx("p",{className:"text-center text-gray-500",children:"No connected associations."})})})]}),e.jsxs(x,{className:"border-gray-800 shadow-lg flex flex-col h-full",children:[e.jsx(w,{className:"flex-shrink-0",children:e.jsxs(v,{className:"text-xl text-white",children:["Pending Requests (",(n==null?void 0:n.length)||0,")"]})}),e.jsx(b,{className:"flex-1 overflow-y-auto scrollbar-thin scrollbar-thumb-gray-700 scrollbar-track-gray-800",children:n&&n.length>0?e.jsx("div",{className:"space-y-4",children:n.map(a=>{var r,l,i;const s=a.requester._id===u?a.recipient:a.requester;return e.jsxs(x,{className:"flex flex-col sm:flex-row items-center justify-between p-4 border border-gray-700 rounded-lg ",children:[e.jsxs("div",{className:"flex items-center gap-4 w-full sm:w-auto",children:[e.jsxs(y,{className:"h-12 w-12 border-2 border-yellow-600 flex-shrink-0",children:[e.jsx(A,{src:s.profile_picture,alt:s.name||s.email}),e.jsx(k,{className:"bg-yellow-600 text-white font-bold",children:((r=s.name)==null?void 0:r.charAt(0).toUpperCase())||s.email.charAt(0).toUpperCase()})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-semibold text-lg text-white truncate",children:s.name||s.email}),e.jsxs("p",{className:"text-sm text-gray-400 flex items-center gap-1 truncate",children:[e.jsx(_,{className:"h-3 w-3 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:s.email})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-1 flex-wrap",children:[e.jsx(f,{variant:"secondary",className:"capitalize",children:s.roles[0]}),((l=s.profile)==null?void 0:l.location)&&e.jsxs(f,{variant:"outline",className:"text-blue-400 border-blue-400",children:[e.jsx(R,{className:"h-3 w-3 mr-1"})," ",s.profile.location]}),((i=s.profile)==null?void 0:i.rating)&&e.jsx(C,{rating:s.profile.rating,showBadge:!0})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 mt-4 sm:mt-0 w-full sm:w-auto flex-shrink-0",children:[e.jsx(h,{variant:"default",size:"sm",onClick:()=>p(a._id,"accept"),className:"w-full sm:w-auto",children:"Accept"}),e.jsx(h,{variant:"outline",size:"sm",onClick:()=>p(a._id,"reject"),className:"w-full sm:w-auto",children:"Reject"})]})]},a._id)})}):e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx("p",{className:"text-center text-gray-500",children:"No pending association requests."})})})]})]})]})]})};export{Z as default};
